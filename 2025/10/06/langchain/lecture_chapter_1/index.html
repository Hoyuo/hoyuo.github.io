<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 8.0.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"hoyuo.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.25.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":"flat"},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="챕터 1: LangChain의 첫걸음🎯 이 챕터에서 배울 것 LangChain을 사용하여 언어 모델(LLM)과 챗 모델을 초기화하는 방법 predict와 predict_messages의 차이점 이해하기 PromptTemplate을 사용하여 동적으로 프롬프트를 생성하는 방법 OutputParser를 사용하여 모델의 출력을 원하는 형식으로 변환하는 방법 La">
<meta property="og:type" content="article">
<meta property="og:title" content="1. LangChain의 첫걸음">
<meta property="og:url" content="https://hoyuo.github.io/2025/10/06/langchain/lecture_chapter_1/index.html">
<meta property="og:site_name" content="Hoyuo&#39;s Blog">
<meta property="og:description" content="챕터 1: LangChain의 첫걸음🎯 이 챕터에서 배울 것 LangChain을 사용하여 언어 모델(LLM)과 챗 모델을 초기화하는 방법 predict와 predict_messages의 차이점 이해하기 PromptTemplate을 사용하여 동적으로 프롬프트를 생성하는 방법 OutputParser를 사용하여 모델의 출력을 원하는 형식으로 변환하는 방법 La">
<meta property="og:locale" content="ko_KR">
<meta property="article:published_time" content="2025-10-05T15:11:00.000Z">
<meta property="article:author" content="Hoyuo">
<meta property="article:tag" content="langchain">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://hoyuo.github.io/2025/10/06/langchain/lecture_chapter_1/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"ko","comments":true,"permalink":"https://hoyuo.github.io/2025/10/06/langchain/lecture_chapter_1/","path":"2025/10/06/langchain/lecture_chapter_1/","title":"1. LangChain의 첫걸음"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>1. LangChain의 첫걸음 | Hoyuo's Blog</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.5.0/search.js" integrity="sha256-xFC6PJ82SL9b3WkGjFavNiA9gm5z6UBxWPiu4CYjptg=" crossorigin="anonymous" defer></script>
<script src="/js/third-party/search/local-search.js" defer></script>







  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js" defer></script>



  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Hoyuo's Blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Mobile Developer<br/> (Android, iOS, Flutter, RN)</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="검색" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>홈</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>태그<span class="badge">2</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>카테고리<span class="badge">0</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>아카이브<span class="badge">9</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>검색
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="Searching..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          목차
        </li>
        <li class="sidebar-nav-overview">
          흝어보기
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%EC%B1%95%ED%84%B0-1-LangChain%EC%9D%98-%EC%B2%AB%EA%B1%B8%EC%9D%8C"><span class="nav-number">1.</span> <span class="nav-text">챕터 1: LangChain의 첫걸음</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%8E%AF-%EC%9D%B4-%EC%B1%95%ED%84%B0%EC%97%90%EC%84%9C-%EB%B0%B0%EC%9A%B8-%EA%B2%83"><span class="nav-number">1.1.</span> <span class="nav-text">🎯 이 챕터에서 배울 것</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-LLM%EA%B3%BC-Chat-Model"><span class="nav-number">1.2.</span> <span class="nav-text">1.1 - LLM과 Chat Model</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%8E%AF-%EC%9D%B4%EB%B2%88-%EB%8B%A8%EA%B3%84%EC%97%90%EC%84%9C-%EB%B0%B0%EC%9A%B8-%EA%B2%83"><span class="nav-number">1.2.1.</span> <span class="nav-text">🎯 이번 단계에서 배울 것</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%93%9D-1%EB%8B%A8%EA%B3%84-ChatOpenAI-%EB%AA%A8%EB%8D%B8-%EC%B4%88%EA%B8%B0%ED%99%94-%EB%B0%8F-%EC%82%AC%EC%9A%A9"><span class="nav-number">1.2.2.</span> <span class="nav-text">📝 1단계: ChatOpenAI 모델 초기화 및 사용</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%94%8D-%EC%BD%94%EB%93%9C-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">🔍 코드 상세 설명</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E2%9C%85-%EC%B2%B4%ED%81%AC%EB%A6%AC%EC%8A%A4%ED%8A%B8"><span class="nav-number">1.2.3.</span> <span class="nav-text">✅ 체크리스트</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-Predict-Messages"><span class="nav-number">1.3.</span> <span class="nav-text">1.2 - Predict Messages</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%8E%AF-%EC%9D%B4%EB%B2%88-%EB%8B%A8%EA%B3%84%EC%97%90%EC%84%9C-%EB%B0%B0%EC%9A%B8-%EA%B2%83-1"><span class="nav-number">1.3.1.</span> <span class="nav-text">🎯 이번 단계에서 배울 것</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%93%9D-1%EB%8B%A8%EA%B3%84-%EB%8B%A4%EC%96%91%ED%95%9C-%EC%97%AD%ED%95%A0%EC%9D%98-%EB%A9%94%EC%8B%9C%EC%A7%80-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0"><span class="nav-number">1.3.2.</span> <span class="nav-text">📝 1단계: 다양한 역할의 메시지 사용하기</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%94%8D-%EC%BD%94%EB%93%9C-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85-1"><span class="nav-number">1.3.2.1.</span> <span class="nav-text">🔍 코드 상세 설명</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E2%9C%85-%EC%B2%B4%ED%81%AC%EB%A6%AC%EC%8A%A4%ED%8A%B8-1"><span class="nav-number">1.3.3.</span> <span class="nav-text">✅ 체크리스트</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-Prompt-Templates"><span class="nav-number">1.4.</span> <span class="nav-text">1.3 - Prompt Templates</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%8E%AF-%EC%9D%B4%EB%B2%88-%EB%8B%A8%EA%B3%84%EC%97%90%EC%84%9C-%EB%B0%B0%EC%9A%B8-%EA%B2%83-2"><span class="nav-number">1.4.1.</span> <span class="nav-text">🎯 이번 단계에서 배울 것</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%93%9D-1%EB%8B%A8%EA%B3%84-%ED%85%9C%ED%94%8C%EB%A6%BF%EC%9C%BC%EB%A1%9C-%ED%94%84%EB%A1%AC%ED%94%84%ED%8A%B8-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0"><span class="nav-number">1.4.2.</span> <span class="nav-text">📝 1단계: 템플릿으로 프롬프트 생성하기</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%94%8D-%EC%BD%94%EB%93%9C-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85-2"><span class="nav-number">1.4.2.1.</span> <span class="nav-text">🔍 코드 상세 설명</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E2%9C%85-%EC%B2%B4%ED%81%AC%EB%A6%AC%EC%8A%A4%ED%8A%B8-2"><span class="nav-number">1.4.3.</span> <span class="nav-text">✅ 체크리스트</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-Output-Parser%EC%99%80-LCEL"><span class="nav-number">1.5.</span> <span class="nav-text">1.4 - Output Parser와 LCEL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%8E%AF-%EC%9D%B4%EB%B2%88-%EB%8B%A8%EA%B3%84%EC%97%90%EC%84%9C-%EB%B0%B0%EC%9A%B8-%EA%B2%83-3"><span class="nav-number">1.5.1.</span> <span class="nav-text">🎯 이번 단계에서 배울 것</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%93%9D-1%EB%8B%A8%EA%B3%84-%EC%B6%9C%EB%A0%A5-%ED%8C%8C%EC%84%9C-%EC%A0%95%EC%9D%98-%EB%B0%8F-%EC%B2%B4%EC%9D%B8-%EC%97%B0%EA%B2%B0"><span class="nav-number">1.5.2.</span> <span class="nav-text">📝 1단계: 출력 파서 정의 및 체인 연결</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%94%8D-%EC%BD%94%EB%93%9C-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85-3"><span class="nav-number">1.5.2.1.</span> <span class="nav-text">🔍 코드 상세 설명</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E2%9C%85-%EC%B2%B4%ED%81%AC%EB%A6%AC%EC%8A%A4%ED%8A%B8-3"><span class="nav-number">1.5.3.</span> <span class="nav-text">✅ 체크리스트</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-Chaining-Chains"><span class="nav-number">1.6.</span> <span class="nav-text">1.5 - Chaining Chains</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%8E%AF-%EC%9D%B4%EB%B2%88-%EB%8B%A8%EA%B3%84%EC%97%90%EC%84%9C-%EB%B0%B0%EC%9A%B8-%EA%B2%83-4"><span class="nav-number">1.6.1.</span> <span class="nav-text">🎯 이번 단계에서 배울 것</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%93%9D-1%EB%8B%A8%EA%B3%84-%EB%91%90-%EA%B0%9C%EC%9D%98-%EC%B2%B4%EC%9D%B8-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0"><span class="nav-number">1.6.2.</span> <span class="nav-text">📝 1단계: 두 개의 체인 연결하기</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%94%8D-%EC%BD%94%EB%93%9C-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85-4"><span class="nav-number">1.6.2.1.</span> <span class="nav-text">🔍 코드 상세 설명</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E2%9C%85-%EC%B2%B4%ED%81%AC%EB%A6%AC%EC%8A%A4%ED%8A%B8-4"><span class="nav-number">1.6.3.</span> <span class="nav-text">✅ 체크리스트</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-Recap"><span class="nav-number">1.7.</span> <span class="nav-text">1.6 - Recap</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%8E%AF-%EC%9D%B4%EB%B2%88-%EB%8B%A8%EA%B3%84%EC%97%90%EC%84%9C-%EB%B0%B0%EC%9A%B8-%EA%B2%83-5"><span class="nav-number">1.7.1.</span> <span class="nav-text">🎯 이번 단계에서 배울 것</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%93%9D-1%EB%8B%A8%EA%B3%84-%EC%B5%9C%EC%A2%85-%EC%B2%B4%EC%9D%B8-%EC%99%84%EC%84%B1-%EB%B0%8F-%EA%B0%9C%EC%84%A0"><span class="nav-number">1.7.2.</span> <span class="nav-text">📝 1단계: 최종 체인 완성 및 개선</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%94%8D-%EC%BD%94%EB%93%9C-%EC%83%81%EC%84%B8-%EC%84%A4%EB%AA%85-5"><span class="nav-number">1.7.2.1.</span> <span class="nav-text">🔍 코드 상세 설명</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%92%A1-%EC%97%B0%EC%8A%B5-%EA%B3%BC%EC%A0%9C"><span class="nav-number">1.7.3.</span> <span class="nav-text">💡 연습 과제</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Hoyuo</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">포스트</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">태그</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://hoyuo.github.io/2025/10/06/langchain/lecture_chapter_1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hoyuo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hoyuo's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="1. LangChain의 첫걸음 | Hoyuo's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          1. LangChain의 첫걸음
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">작성일</span>

      <time title="Post created: 2025-10-06 00:11" itemprop="dateCreated datePublished" datetime="2025-10-06T00:11:00+09:00">2025-10-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="챕터-1-LangChain의-첫걸음"><a href="#챕터-1-LangChain의-첫걸음" class="headerlink" title="챕터 1: LangChain의 첫걸음"></a>챕터 1: LangChain의 첫걸음</h1><h2 id="🎯-이-챕터에서-배울-것"><a href="#🎯-이-챕터에서-배울-것" class="headerlink" title="🎯 이 챕터에서 배울 것"></a>🎯 이 챕터에서 배울 것</h2><ul>
<li>LangChain을 사용하여 언어 모델(LLM)과 챗 모델을 초기화하는 방법</li>
<li><code>predict</code>와 <code>predict_messages</code>의 차이점 이해하기</li>
<li><code>PromptTemplate</code>을 사용하여 동적으로 프롬프트를 생성하는 방법</li>
<li><code>OutputParser</code>를 사용하여 모델의 출력을 원하는 형식으로 변환하는 방법</li>
<li>LangChain Expression Language (LCEL)을 사용하여 여러 구성 요소를 연결(chain)하는 방법</li>
</ul>
<hr>
<h2 id="1-1-LLM과-Chat-Model"><a href="#1-1-LLM과-Chat-Model" class="headerlink" title="1.1 - LLM과 Chat Model"></a>1.1 - LLM과 Chat Model</h2><h3 id="🎯-이번-단계에서-배울-것"><a href="#🎯-이번-단계에서-배울-것" class="headerlink" title="🎯 이번 단계에서 배울 것"></a>🎯 이번 단계에서 배울 것</h3><ul>
<li>LangChain의 <code>ChatOpenAI</code> 모델을 초기화하는 방법</li>
<li><code>predict</code> 메소드를 사용하여 간단한 질문에 대한 답변을 얻는 방법</li>
</ul>
<h3 id="📝-1단계-ChatOpenAI-모델-초기화-및-사용"><a href="#📝-1단계-ChatOpenAI-모델-초기화-및-사용" class="headerlink" title="📝 1단계: ChatOpenAI 모델 초기화 및 사용"></a>📝 1단계: ChatOpenAI 모델 초기화 및 사용</h3><p><strong>전체 코드 (notebook.ipynb):</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.chat_models <span class="keyword">import</span> ChatOpenAI</span><br><span class="line"></span><br><span class="line">chat = ChatOpenAI()</span><br><span class="line"></span><br><span class="line">b = chat.predict(<span class="string">&quot;How many planets are there?&quot;</span>)</span><br><span class="line"></span><br><span class="line">b</span><br></pre></td></tr></table></figure>

<h4 id="🔍-코드-상세-설명"><a href="#🔍-코드-상세-설명" class="headerlink" title="🔍 코드 상세 설명"></a>🔍 코드 상세 설명</h4><p><strong>1. <code>ChatOpenAI</code>란?</strong><br><code>ChatOpenAI</code>는 LangChain 라이브러리에서 제공하는 구성 요소로, OpenAI의 GPT 모델(예: GPT-3.5, GPT-4)과 상호작용할 수 있게 해주는 다리 역할을 합니다. 이 클래스를 사용하면 복잡한 API 호출 없이 Python 코드 내에서 직접 대화형 AI 모델을 사용할 수 있습니다.</p>
<ul>
<li><strong>왜 사용하는가?</strong>: OpenAI의 강력한 언어 모델을 우리 애플리케이션에 쉽게 통합할 수 있습니다.</li>
<li><strong>어떻게 작동하는가?</strong>: <code>ChatOpenAI()</code>를 호출하면, 내부적으로 OpenAI API에 연결할 준비를 합니다. 이 때, 시스템에 <code>OPENAI_API_KEY</code> 환경 변수가 설정되어 있어야 합니다.</li>
</ul>
<p><strong>2. <code>.predict()</code> 메소드</strong><br><code>.predict()</code>는 가장 간단하게 모델에게 질문을 던지고 답변(문자열)을 받는 방법입니다.</p>
<ul>
<li><strong>사용법</strong>: <code>chat.predict(&quot;질문 내용&quot;)</code> 형태로 사용하며, 문자열을 입력받아 문자열을 반환합니다.</li>
</ul>
<p><strong>비교 예시:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Before (LangChain 사용 전)</span></span><br><span class="line"><span class="comment"># import openai</span></span><br><span class="line"><span class="comment"># openai.Completion.create(model=&quot;text-davinci-003&quot;, prompt=&quot;...&quot;)</span></span><br><span class="line"><span class="comment"># 위와 같이 복잡한 API 호출이 필요했습니다.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># After (LangChain 사용 후)</span></span><br><span class="line">chat = ChatOpenAI()</span><br><span class="line">chat.predict(<span class="string">&quot;How many planets are there?&quot;</span>)</span><br><span class="line"><span class="comment"># 단 두 줄로 모델의 응답을 받을 수 있습니다.</span></span><br></pre></td></tr></table></figure>

<h3 id="✅-체크리스트"><a href="#✅-체크리스트" class="headerlink" title="✅ 체크리스트"></a>✅ 체크리스트</h3><ul>
<li><input disabled="" type="checkbox"> <code>langchain</code> 라이브러리가 설치되었나요?</li>
<li><input disabled="" type="checkbox"> <code>OPENAI_API_KEY</code> 환경 변수를 설정했나요?</li>
<li><input disabled="" type="checkbox"> <code>ChatOpenAI</code>를 import하고 초기화했나요?</li>
<li><input disabled="" type="checkbox"> <code>predict</code> 메소드로 질문을 보내고 결과를 확인했나요?</li>
</ul>
<hr>
<h2 id="1-2-Predict-Messages"><a href="#1-2-Predict-Messages" class="headerlink" title="1.2 - Predict Messages"></a>1.2 - Predict Messages</h2><h3 id="🎯-이번-단계에서-배울-것-1"><a href="#🎯-이번-단계에서-배울-것-1" class="headerlink" title="🎯 이번 단계에서 배울 것"></a>🎯 이번 단계에서 배울 것</h3><ul>
<li><code>SystemMessage</code>, <code>AIMessage</code>, <code>HumanMessage</code>의 역할 이해하기</li>
<li><code>predict_messages</code>를 사용하여 더 복잡한 대화 맥락을 전달하는 방법</li>
</ul>
<h3 id="📝-1단계-다양한-역할의-메시지-사용하기"><a href="#📝-1단계-다양한-역할의-메시지-사용하기" class="headerlink" title="📝 1단계: 다양한 역할의 메시지 사용하기"></a>📝 1단계: 다양한 역할의 메시지 사용하기</h3><p><strong>전체 코드 (notebook.ipynb):</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.chat_models <span class="keyword">import</span> ChatOpenAI</span><br><span class="line"><span class="keyword">from</span> langchain.schema <span class="keyword">import</span> HumanMessage, AIMessage, SystemMessage</span><br><span class="line"></span><br><span class="line">chat = ChatOpenAI(temperature=<span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line">messages = [</span><br><span class="line">    SystemMessage(</span><br><span class="line">        content=<span class="string">&quot;You are a geography expert. And you only reply in &#123;language&#125;.&quot;</span>,</span><br><span class="line">    ),</span><br><span class="line">    AIMessage(content=<span class="string">&quot;Ciao, mi chiamo &#123;name&#125;!&quot;</span>),</span><br><span class="line">    HumanMessage(</span><br><span class="line">        content=<span class="string">&quot;What is the distance between &#123;country_a&#125; and &#123;country_b&#125;. Also, what is your name?&quot;</span>,</span><br><span class="line">    ),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">chat.predict_messages(messages)</span><br></pre></td></tr></table></figure>

<h4 id="🔍-코드-상세-설명-1"><a href="#🔍-코드-상세-설명-1" class="headerlink" title="🔍 코드 상세 설명"></a>🔍 코드 상세 설명</h4><p><strong>1. 메시지 타입: <code>System</code>, <code>AI</code>, <code>Human</code></strong></p>
<ul>
<li><strong><code>SystemMessage</code></strong>: 모델의 역할이나 행동 방식을 지시하는 메시지입니다. 예를 들어, “너는 번역가야” 또는 “친절하게 대답해” 와 같은 지침을 내립니다.</li>
<li><strong><code>HumanMessage</code></strong>: 사용자가 입력하는 메시지입니다.</li>
<li><strong><code>AIMessage</code></strong>: AI 모델이 이전에 했던 응답을 나타냅니다. 대화의 흐름을 유지할 때 사용됩니다.</li>
</ul>
<p><strong>2. <code>.predict_messages()</code> 메소드</strong><br><code>.predict()</code>가 단순한 문자열 질문만 받는 것과 달리, <code>.predict_messages()</code>는 위에서 설명한 메시지 객체들의 리스트를 입력으로 받습니다. 이를 통해 모델에게 역할, 이전 대화 내용 등 더 풍부한 맥락을 전달하여 정교한 답변을 유도할 수 있습니다.</p>
<p><strong>비교 예시:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Before (predict)</span></span><br><span class="line"><span class="comment"># 단일 질문만 가능</span></span><br><span class="line">chat.predict(<span class="string">&quot;What is the distance between Mexico and Thailand?&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># After (predict_messages)</span></span><br><span class="line"><span class="comment"># 역할 부여와 이전 대화 내용을 포함한 다중 메시지 전달 가능</span></span><br><span class="line">messages = [</span><br><span class="line">    SystemMessage(content=<span class="string">&quot;You are a geography expert.&quot;</span>),</span><br><span class="line">    HumanMessage(content=<span class="string">&quot;What is the distance between Mexico and Thailand?&quot;</span>),</span><br><span class="line">]</span><br><span class="line">chat.predict_messages(messages)</span><br></pre></td></tr></table></figure>

<h3 id="✅-체크리스트-1"><a href="#✅-체크리스트-1" class="headerlink" title="✅ 체크리스트"></a>✅ 체크리스트</h3><ul>
<li><input disabled="" type="checkbox"> <code>SystemMessage</code>, <code>AIMessage</code>, <code>HumanMessage</code>를 import 했나요?</li>
<li><input disabled="" type="checkbox"> 세 가지 메시지 타입의 역할을 이해했나요?</li>
<li><input disabled="" type="checkbox"> 메시지 리스트를 만들어 <code>predict_messages</code>에 전달해 보았나요?</li>
</ul>
<hr>
<h2 id="1-3-Prompt-Templates"><a href="#1-3-Prompt-Templates" class="headerlink" title="1.3 - Prompt Templates"></a>1.3 - Prompt Templates</h2><h3 id="🎯-이번-단계에서-배울-것-2"><a href="#🎯-이번-단계에서-배울-것-2" class="headerlink" title="🎯 이번 단계에서 배울 것"></a>🎯 이번 단계에서 배울 것</h3><ul>
<li><code>PromptTemplate</code>과 <code>ChatPromptTemplate</code>의 사용법</li>
<li>템플릿을 사용하여 동적으로 프롬프트를 만드는 방법</li>
</ul>
<h3 id="📝-1단계-템플릿으로-프롬프트-생성하기"><a href="#📝-1단계-템플릿으로-프롬프트-생성하기" class="headerlink" title="📝 1단계: 템플릿으로 프롬프트 생성하기"></a>📝 1단계: 템플릿으로 프롬프트 생성하기</h3><p><strong>전체 코드 (notebook.ipynb):</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.chat_models <span class="keyword">import</span> ChatOpenAI</span><br><span class="line"><span class="keyword">from</span> langchain.prompts <span class="keyword">import</span> ChatPromptTemplate</span><br><span class="line"></span><br><span class="line">chat = ChatOpenAI(temperature=<span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line">template = ChatPromptTemplate.from_messages(</span><br><span class="line">    [</span><br><span class="line">        (<span class="string">&quot;system&quot;</span>, <span class="string">&quot;You are a geography expert. And you only reply in &#123;language&#125;.&quot;</span>),</span><br><span class="line">        (<span class="string">&quot;ai&quot;</span>, <span class="string">&quot;Ciao, mi chiamo &#123;name&#125;!&quot;</span>),</span><br><span class="line">        (</span><br><span class="line">            <span class="string">&quot;human&quot;</span>,</span><br><span class="line">            <span class="string">&quot;What is the distance between &#123;country_a&#125; and &#123;country_b&#125;. Also, what is your name?&quot;</span>,</span><br><span class="line">        ),</span><br><span class="line">    ]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">prompt = template.format_messages(</span><br><span class="line">    language=<span class="string">&quot;Greek&quot;</span>,</span><br><span class="line">    name=<span class="string">&quot;Socrates&quot;</span>,</span><br><span class="line">    country_a=<span class="string">&quot;Mexico&quot;</span>,</span><br><span class="line">    country_b=<span class="string">&quot;Thailand&quot;</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">chat.predict_messages(prompt)</span><br></pre></td></tr></table></figure>

<h4 id="🔍-코드-상세-설명-2"><a href="#🔍-코드-상세-설명-2" class="headerlink" title="🔍 코드 상세 설명"></a>🔍 코드 상세 설명</h4><p><strong>1. <code>ChatPromptTemplate</code>이란?</strong><br><code>ChatPromptTemplate</code>은 메시지 목록의 템플릿을 만드는 도구입니다. <code>{variable}</code>과 같은 플레이스홀더를 사용하여 프롬프트의 일부를 동적으로 변경할 수 있습니다.</p>
<ul>
<li><strong>왜 사용하는가?</strong>: 매번 <code>SystemMessage</code>, <code>HumanMessage</code> 객체를 수동으로 만들 필요 없이, 정해진 틀에 변수만 바꿔 끼워넣어 효율적으로 프롬프트를 생성할 수 있습니다.</li>
</ul>
<p><strong>2. <code>.from_messages()</code>와 <code>.format_messages()</code></strong></p>
<ul>
<li><strong><code>.from_messages()</code></strong>: 메시지 역할과 템플릿 문자열의 튜플 리스트를 받아 템플릿 객체를 생성합니다.</li>
<li><strong><code>.format_messages()</code></strong>: 생성된 템플릿 객체에 실제 변수 값을 전달하여 최종 메시지 리스트를 만듭니다.</li>
</ul>
<p><strong>시각화:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">┌──────────────────────────────┐      ┌──────────────────────────┐      ┌────────────────────────────┐</span><br><span class="line">│   ChatPromptTemplate         │      │     .format_messages()   │      │      Final Messages        │</span><br><span class="line">│                              │      │                          │      │                            │</span><br><span class="line">│ (&quot;system&quot;, &quot;...&#123;lang&#125;...&quot;)   │ +    │  lang=&quot;Greek&quot;, ...       │  -&gt;  │ [SystemMessage(..Greek..)] │</span><br><span class="line">│ (&quot;human&quot;, &quot;...&#123;country&#125;...&quot;) │      │  country=&quot;Mexico&quot;        │      │ [HumanMessage(..Mexico..)] │</span><br><span class="line">└──────────────────────────────┘      └──────────────────────────┘      └────────────────────────────┘</span><br></pre></td></tr></table></figure>

<h3 id="✅-체크리스트-2"><a href="#✅-체크리스트-2" class="headerlink" title="✅ 체크리스트"></a>✅ 체크리스트</h3><ul>
<li><input disabled="" type="checkbox"> <code>ChatPromptTemplate</code>을 import 했나요?</li>
<li><input disabled="" type="checkbox"> <code>from_messages</code>를 사용해 템플릿을 만들었나요?</li>
<li><input disabled="" type="checkbox"> <code>format_messages</code>에 변수를 전달하여 최종 프롬프트를 생성했나요?</li>
</ul>
<hr>
<h2 id="1-4-Output-Parser와-LCEL"><a href="#1-4-Output-Parser와-LCEL" class="headerlink" title="1.4 - Output Parser와 LCEL"></a>1.4 - Output Parser와 LCEL</h2><h3 id="🎯-이번-단계에서-배울-것-3"><a href="#🎯-이번-단계에서-배울-것-3" class="headerlink" title="🎯 이번 단계에서 배울 것"></a>🎯 이번 단계에서 배울 것</h3><ul>
<li><code>BaseOutputParser</code>를 상속받아 커스텀 파서를 만드는 방법</li>
<li>LangChain Expression Language (LCEL)의 파이프(<code>|</code>) 연산자 사용법</li>
</ul>
<h3 id="📝-1단계-출력-파서-정의-및-체인-연결"><a href="#📝-1단계-출력-파서-정의-및-체인-연결" class="headerlink" title="📝 1단계: 출력 파서 정의 및 체인 연결"></a>📝 1단계: 출력 파서 정의 및 체인 연결</h3><p><strong>전체 코드 (notebook.ipynb):</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.chat_models <span class="keyword">import</span> ChatOpenAI</span><br><span class="line"><span class="keyword">from</span> langchain.prompts <span class="keyword">import</span> ChatPromptTemplate</span><br><span class="line"><span class="keyword">from</span> langchain.schema <span class="keyword">import</span> BaseOutputParser</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CommaOutputParser</span>(<span class="title class_ inherited__">BaseOutputParser</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, text</span>):</span><br><span class="line">        items = text.strip().split(<span class="string">&quot;,&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">str</span>.strip, items))</span><br><span class="line"></span><br><span class="line">chat = ChatOpenAI(temperature=<span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line">template = ChatPromptTemplate.from_messages(</span><br><span class="line">    [</span><br><span class="line">        (</span><br><span class="line">            <span class="string">&quot;system&quot;</span>,</span><br><span class="line">            <span class="string">&quot;You are a list generating machine. Everything you are asked will be answered with a comma separated list of max &#123;max_items&#125; in lowercase. Do NOT reply with anything else.&quot;</span>,</span><br><span class="line">        ),</span><br><span class="line">        (<span class="string">&quot;human&quot;</span>, <span class="string">&quot;&#123;question&#125;&quot;</span>),</span><br><span class="line">    ]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># LCEL을 사용한 체인 연결</span></span><br><span class="line">chain = template | chat | CommaOutputParser()</span><br><span class="line"></span><br><span class="line">chain.invoke(&#123;<span class="string">&quot;max_items&quot;</span>: <span class="number">5</span>, <span class="string">&quot;question&quot;</span>: <span class="string">&quot;What are the pokemons?&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="🔍-코드-상세-설명-3"><a href="#🔍-코드-상세-설명-3" class="headerlink" title="🔍 코드 상세 설명"></a>🔍 코드 상세 설명</h4><p><strong>1. <code>BaseOutputParser</code></strong><br>모델의 출력(주로 문자열)을 우리가 원하는 형태(예: 리스트, JSON)로 변환하는 역할을 합니다. <code>BaseOutputParser</code>를 상속하고 <code>parse</code> 메소드를 구현하여 커스텀 파서를 만들 수 있습니다.</p>
<ul>
<li><strong><code>CommaOutputParser</code></strong>: 이 예제에서는 쉼표로 구분된 문자열을 Python 리스트로 변환하는 파서를 만들었습니다.</li>
</ul>
<p><strong>2. LangChain Expression Language (LCEL)</strong><br>LCEL은 LangChain의 여러 구성 요소를 <code>|</code> (파이프) 연산자로 쉽게 연결할 수 있게 해주는 강력한 기능입니다. 데이터가 왼쪽에서 오른쪽으로 흐르며 각 단계를 거칩니다.</p>
<p><strong>동작 흐름:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1. `chain.invoke`에 딕셔너리 전달</span><br><span class="line">   &#123;&quot;max_items&quot;: 5, &quot;question&quot;: &quot;...&quot;&#125;</span><br><span class="line">      |</span><br><span class="line">      V</span><br><span class="line">2. `template`이 딕셔너리를 받아 프롬프트(메시지 리스트) 생성</span><br><span class="line">      |</span><br><span class="line">      V</span><br><span class="line">3. `chat` 모델이 프롬프트를 받아 응답(문자열) 생성</span><br><span class="line">   &quot;pikachu, charizard, bulbasaur, ...&quot;</span><br><span class="line">      |</span><br><span class="line">      V</span><br><span class="line">4. `CommaOutputParser`가 문자열을 받아 최종 결과(Python 리스트) 반환</span><br><span class="line">   [&#x27;pikachu&#x27;, &#x27;charizard&#x27;, &#x27;bulbasaur&#x27;, ...]</span><br></pre></td></tr></table></figure>

<h3 id="✅-체크리스트-3"><a href="#✅-체크리스트-3" class="headerlink" title="✅ 체크리스트"></a>✅ 체크리스트</h3><ul>
<li><input disabled="" type="checkbox"> <code>BaseOutputParser</code>를 상속하여 나만의 파서를 만들었나요?</li>
<li><input disabled="" type="checkbox"> <code>|</code> 연산자를 사용하여 <code>template</code>, <code>chat</code>, <code>parser</code>를 연결했나요?</li>
<li><input disabled="" type="checkbox"> <code>chain.invoke()</code>를 사용하여 전체 체인을 실행했나요?</li>
</ul>
<hr>
<h2 id="1-5-Chaining-Chains"><a href="#1-5-Chaining-Chains" class="headerlink" title="1.5 - Chaining Chains"></a>1.5 - Chaining Chains</h2><h3 id="🎯-이번-단계에서-배울-것-4"><a href="#🎯-이번-단계에서-배울-것-4" class="headerlink" title="🎯 이번 단계에서 배울 것"></a>🎯 이번 단계에서 배울 것</h3><ul>
<li>여러 개의 체인을 하나로 연결하는 방법</li>
<li>스트리밍 출력을 처리하는 방법</li>
</ul>
<h3 id="📝-1단계-두-개의-체인-연결하기"><a href="#📝-1단계-두-개의-체인-연결하기" class="headerlink" title="📝 1단계: 두 개의 체인 연결하기"></a>📝 1단계: 두 개의 체인 연결하기</h3><p><strong>전체 코드 (notebook.ipynb):</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.chat_models <span class="keyword">import</span> ChatOpenAI</span><br><span class="line"><span class="keyword">from</span> langchain.prompts <span class="keyword">import</span> ChatPromptTemplate</span><br><span class="line"><span class="keyword">from</span> langchain.callbacks <span class="keyword">import</span> StreamingStdOutCallbackHandler</span><br><span class="line"></span><br><span class="line">chat = ChatOpenAI(</span><br><span class="line">    temperature=<span class="number">0.1</span>,</span><br><span class="line">    streaming=<span class="literal">True</span>,</span><br><span class="line">    callbacks=[</span><br><span class="line">        StreamingStdOutCallbackHandler(),</span><br><span class="line">    ],</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 첫 번째 체인: 요리 종류를 받아 레시피를 생성</span></span><br><span class="line">chef_prompt = ChatPromptTemplate.from_messages(</span><br><span class="line">    [</span><br><span class="line">        (<span class="string">&quot;system&quot;</span>, <span class="string">&quot;You are a world-class international chef...&quot;</span>),</span><br><span class="line">        (<span class="string">&quot;human&quot;</span>, <span class="string">&quot;I want to cook &#123;cuisine&#125; food.&quot;</span>),</span><br><span class="line">    ]</span><br><span class="line">)</span><br><span class="line">chef_chain = chef_prompt | chat</span><br><span class="line"></span><br><span class="line"><span class="comment"># 두 번째 체인: 레시피를 받아 채식주의자용으로 변경</span></span><br><span class="line">veg_chef_prompt = ChatPromptTemplate.from_messages(</span><br><span class="line">    [</span><br><span class="line">        (<span class="string">&quot;system&quot;</span>, <span class="string">&quot;You are a vegetarian chef...&quot;</span>),</span><br><span class="line">        (<span class="string">&quot;human&quot;</span>, <span class="string">&quot;&#123;recipe&#125;&quot;</span>),</span><br><span class="line">    ]</span><br><span class="line">)</span><br><span class="line">veg_chain = veg_chef_prompt | chat</span><br><span class="line"></span><br><span class="line"><span class="comment"># 두 체인 연결</span></span><br><span class="line">final_chain = &#123;<span class="string">&quot;recipe&quot;</span>: chef_chain&#125; | veg_chain</span><br><span class="line"></span><br><span class="line">final_chain.invoke(&#123;<span class="string">&quot;cuisine&quot;</span>: <span class="string">&quot;indian&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="🔍-코드-상세-설명-4"><a href="#🔍-코드-상세-설명-4" class="headerlink" title="🔍 코드 상세 설명"></a>🔍 코드 상세 설명</h4><p><strong>1. <code>StreamingStdOutCallbackHandler</code></strong><br>모델이 응답을 생성할 때, 전체 응답이 완료될 때까지 기다리는 대신 단어(토큰)가 생성될 때마다 실시간으로 출력해주는 콜백 핸들러입니다. 사용자 경험을 향상시킬 수 있습니다.</p>
<p><strong>2. 체인 연결하기</strong><br>LCEL을 사용하면 한 체인의 출력을 다른 체인의 입력으로 전달할 수 있습니다.</p>
<p><strong>동작 흐름:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1. `final_chain.invoke`에 &#123;&quot;cuisine&quot;: &quot;indian&quot;&#125; 전달</span><br><span class="line">      |</span><br><span class="line">      V</span><br><span class="line">2. `chef_chain`이 &#x27;indian&#x27;을 받아 레시피(AIMessage) 생성</span><br><span class="line">      |</span><br><span class="line">      V</span><br><span class="line">3. &#123;&quot;recipe&quot;: AIMessage(...)&#125; 형태의 딕셔너리가 `veg_chain`으로 전달됨</span><br><span class="line">      |</span><br><span class="line">      V</span><br><span class="line">4. `veg_chain`이 레시피를 입력받아 최종적인 채식 레시피를 스트리밍으로 출력</span><br></pre></td></tr></table></figure>

<h3 id="✅-체크리스트-4"><a href="#✅-체크리스트-4" class="headerlink" title="✅ 체크리스트"></a>✅ 체크리스트</h3><ul>
<li><input disabled="" type="checkbox"> <code>StreamingStdOutCallbackHandler</code>를 사용하여 실시간 출력을 확인했나요?</li>
<li><input disabled="" type="checkbox"> 두 개 이상의 프롬프트와 모델을 각각의 체인으로 만들었나요?</li>
<li><input disabled="" type="checkbox"> 첫 번째 체인의 출력을 두 번째 체인의 입력으로 전달하도록 <code>final_chain</code>을 구성했나요?</li>
</ul>
<hr>
<h2 id="1-6-Recap"><a href="#1-6-Recap" class="headerlink" title="1.6 - Recap"></a>1.6 - Recap</h2><h3 id="🎯-이번-단계에서-배울-것-5"><a href="#🎯-이번-단계에서-배울-것-5" class="headerlink" title="🎯 이번 단계에서 배울 것"></a>🎯 이번 단계에서 배울 것</h3><ul>
<li>챕터 1에서 배운 모든 개념을 종합하여 하나의 체인을 완성하는 방법</li>
</ul>
<h3 id="📝-1단계-최종-체인-완성-및-개선"><a href="#📝-1단계-최종-체인-완성-및-개선" class="headerlink" title="📝 1단계: 최종 체인 완성 및 개선"></a>📝 1단계: 최종 체인 완성 및 개선</h3><p><strong>전체 코드 (notebook.ipynb):</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.chat_models <span class="keyword">import</span> ChatOpenAI</span><br><span class="line"><span class="keyword">from</span> langchain.prompts <span class="keyword">import</span> ChatPromptTemplate</span><br><span class="line"><span class="keyword">from</span> langchain.callbacks <span class="keyword">import</span> StreamingStdOutCallbackHandler</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 스트리밍 콜백을 포함한 챗 모델 초기화</span></span><br><span class="line">chat = ChatOpenAI(</span><br><span class="line">    temperature=<span class="number">0.1</span>,</span><br><span class="line">    streaming=<span class="literal">True</span>,</span><br><span class="line">    callbacks=[</span><br><span class="line">        StreamingStdOutCallbackHandler(),</span><br><span class="line">    ],</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 요리사 역할을 정의하는 프롬프트 템플릿</span></span><br><span class="line">chef_prompt = ChatPromptTemplate.from_messages(</span><br><span class="line">    [</span><br><span class="line">        (</span><br><span class="line">            <span class="string">&quot;system&quot;</span>,</span><br><span class="line">            <span class="string">&quot;You are a world-class international chef. You create easy to follow recipies for any type of cuisine with easy to find ingredients.&quot;</span>,</span><br><span class="line">        ),</span><br><span class="line">        (<span class="string">&quot;human&quot;</span>, <span class="string">&quot;I want to cook &#123;cuisine&#125; food.&quot;</span>),</span><br><span class="line">    ]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 요리사 체인</span></span><br><span class="line">chef_chain = chef_prompt | chat</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 채식주의자 요리사 역할을 정의하는 프롬프트 템플릿</span></span><br><span class="line">veg_chef_prompt = ChatPromptTemplate.from_messages(</span><br><span class="line">    [</span><br><span class="line">        (</span><br><span class="line">            <span class="string">&quot;system&quot;</span>,</span><br><span class="line">            <span class="string">&quot;You are a vegetarian chef specialized on making traditional recipies vegetarian. You find alternative ingredients and explain their preparation. You don&#x27;t radically modify the recipe. If there is no alternative for a food just say you don&#x27;t know how to replace it.&quot;</span>,</span><br><span class="line">        ),</span><br><span class="line">        (<span class="string">&quot;human&quot;</span>, <span class="string">&quot;&#123;recipe&#125;&quot;</span>),</span><br><span class="line">    ]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. 채식주의자 요리사 체인</span></span><br><span class="line">veg_chain = veg_chef_prompt | chat</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. 두 체인을 연결한 최종 체인</span></span><br><span class="line">final_chain = &#123;<span class="string">&quot;recipe&quot;</span>: chef_chain&#125; | veg_chain</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7. 최종 체인 실행</span></span><br><span class="line">final_chain.invoke(&#123;<span class="string">&quot;cuisine&quot;</span>: <span class="string">&quot;indian&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="🔍-코드-상세-설명-5"><a href="#🔍-코드-상세-설명-5" class="headerlink" title="🔍 코드 상세 설명"></a>🔍 코드 상세 설명</h4><p>이번 단계에서는 이전까지 배운 모든 것을 종합합니다.</p>
<ul>
<li><code>ChatOpenAI</code>를 <code>StreamingStdOutCallbackHandler</code>와 함께 설정하여 실시간 응답을 받습니다.</li>
<li>각기 다른 역할을 가진 두 개의 <code>ChatPromptTemplate</code> (<code>chef_prompt</code>, <code>veg_chef_prompt</code>)을 정의합니다.</li>
<li>각 템플릿을 <code>chat</code> 모델과 <code>|</code> 연산자로 연결하여 두 개의 기본 체인(<code>chef_chain</code>, <code>veg_chain</code>)을 만듭니다.</li>
<li><code>chef_chain</code>의 출력을 <code>veg_chain</code>의 <code>recipe</code> 입력으로 매핑하여 <code>final_chain</code>을 구성합니다.</li>
<li><code>invoke</code>를 사용하여 전체 프로세스를 시작합니다.</li>
</ul>
<p>이것이 바로 LangChain의 핵심 아이디어입니다. 작고 재사용 가능한 구성 요소(LLM, Prompt, Parser 등)를 만들어 LCEL을 통해 레고 블록처럼 조립하여 복잡한 애플리케이션을 구축할 수 있습니다.</p>
<h3 id="💡-연습-과제"><a href="#💡-연습-과제" class="headerlink" title="💡 연습 과제"></a>💡 연습 과제</h3><ol>
<li><strong>번역 체인 추가하기</strong>: <code>final_chain</code>의 마지막에 번역가 역할을 하는 세 번째 체인을 추가하여, 최종 레시피를 스페인어로 번역하도록 만들어보세요.</li>
<li><strong>출력 파서 사용하기</strong>: <code>chef_chain</code> 다음에 <code>CommaOutputParser</code>와 유사한 파서를 추가하여, 레시피에서 재료 목록만 추출하도록 수정해보세요.</li>
</ol>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/langchain/" rel="tag"><i class="fa fa-tag"></i> langchain</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/08/19/flutter/flutter-0/" rel="prev" title="Flutter Init">
                  <i class="fa fa-angle-left"></i> Flutter Init
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2025/10/06/langchain/lecture_chapter_2/" rel="next" title="2. 스마트한 프롬프트 엔지니어링">
                  2. 스마트한 프롬프트 엔지니어링 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Hoyuo</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
