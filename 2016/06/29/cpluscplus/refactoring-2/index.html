<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"hoyuo.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Refactoring지난 이야기?많은 사람들이 C++로 C스러운 코드를 짠다.먼저 캐스팅에 대해 알아보자. 캐스팅 이야기C &#x2F; C++의 차이1234567&#x2F;&#x2F; casting.c#include &lt;stdlib.h&gt;int main()&amp;#123;    char* p &#x3D; malloc(1);&amp;#125;  C에선 흔한 코드 123456789&#x2F;&#x2F; casting.">
<meta property="og:type" content="article">
<meta property="og:title" content="리펙토링 2강">
<meta property="og:url" content="https://hoyuo.github.io/2016/06/29/cpluscplus/refactoring-2/index.html">
<meta property="og:site_name" content="Hoyuo&#39;s Blog">
<meta property="og:description" content="Refactoring지난 이야기?많은 사람들이 C++로 C스러운 코드를 짠다.먼저 캐스팅에 대해 알아보자. 캐스팅 이야기C &#x2F; C++의 차이1234567&#x2F;&#x2F; casting.c#include &lt;stdlib.h&gt;int main()&amp;#123;    char* p &#x3D; malloc(1);&amp;#125;  C에선 흔한 코드 123456789&#x2F;&#x2F; casting.">
<meta property="og:locale" content="ko_KR">
<meta property="article:published_time" content="2016-06-28T15:00:47.000Z">
<meta property="article:author" content="Hoyuo">
<meta property="article:tag" content="cpp">
<meta property="article:tag" content="refactoring">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://hoyuo.github.io/2016/06/29/cpluscplus/refactoring-2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'ko'
  };
</script>

  <title>리펙토링 2강 | Hoyuo's Blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-89785418-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-89785418-1');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hoyuo's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Android Developer</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>홈</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>태그<span class="badge">11</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>카테고리<span class="badge">8</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>아카이브<span class="badge">45</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>검색
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/Hoyuo" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://hoyuo.github.io/2016/06/29/cpluscplus/refactoring-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hoyuo">
      <meta itemprop="description" content="Hoyuo's programming writting">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hoyuo's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          리펙토링 2강
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2016-06-29 00:00" itemprop="dateCreated datePublished" datetime="2016-06-29T00:00:47+09:00">2016-06-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/study/" itemprop="url" rel="index"><span itemprop="name">study</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Refactoring"><a href="#Refactoring" class="headerlink" title="Refactoring"></a>Refactoring</h1><h2 id="지난-이야기"><a href="#지난-이야기" class="headerlink" title="지난 이야기?"></a>지난 이야기?</h2><p>많은 사람들이 C++로 C스러운 코드를 짠다.<br>먼저 캐스팅에 대해 알아보자.</p>
<h2 id="캐스팅-이야기"><a href="#캐스팅-이야기" class="headerlink" title="캐스팅 이야기"></a>캐스팅 이야기</h2><h3 id="C-C-의-차이"><a href="#C-C-의-차이" class="headerlink" title="C / C++의 차이"></a>C / C++의 차이</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// casting.c</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">char</span>* p = <span class="hljs-built_in">malloc</span>(<span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>C에선 흔한 코드</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// casting.cpp</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">char</span>* p = <span class="hljs-built_in">malloc</span>(<span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>C++에선 컴파일 타임에서 에러가 난다.</p>
<p>왜 그럴까?</p>
<h3 id="C언어의-설계-철학"><a href="#C언어의-설계-철학" class="headerlink" title="C언어의 설계 철학"></a>C언어의 설계 철학</h3><p>C언어는 사용자를 믿고 실행시킨다. 즉 많은 책임이 사용자에게 있다. 그렇기 때문에 컴파일 타임에서 에러가 나지 않는다. 반면에 C++에선 컴파일러가 타입 체크를 해주므로 컴파일 타임에서 에러가 나는 것. 이건 개발자에 축복이다!</p>
<h3 id="C-에서의-형-변환"><a href="#C-에서의-형-변환" class="headerlink" title="C++에서의 형 변환"></a>C++에서의 형 변환</h3><p>원래 컴파일러는 포인터간의 캐스팅은 이성적이지 않다고 판단한다. 그래서 사용자가 형 변환을 시키지 않으면 암시적 형 변환은 일어나지 않는다. 하지만 void형 포인터에 한해서는 다르다. void 타입을 구체적인 타입으로 캐스팅을 하는 건 이성적인 코드라고 판단한다. void형 포인터는 아무런 연산 (역참조, 덧셈, 뺄셈)을 할 수 없지만 char형 포인터로는 연산이 가능하므로 의미가 있다고 판단하는 것이다.</p>
<p>근데 그렇다고 암시적 형 변환을 해주는 것은 아니다. C++에는 여러가지 형 변환이 있는데…</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// 0. 명시적 형변환: 컴파일러의 타입 체크 기능을 끔</span><br>    <span class="hljs-comment">// 이렇게 짜지말것! 포인터에 대해 컴파일러가 보장해주지 않는 것이기 때문이다.</span><br>    <span class="hljs-keyword">char</span>* p1 = (<span class="hljs-keyword">char</span>*) <span class="hljs-built_in">malloc</span>(<span class="hljs-number">1</span>);<br><br>    <span class="hljs-comment">// 1. 이성적 형 변환: static_cast</span><br>    <span class="hljs-comment">// 형 변환이 이성적이라면 캐스팅이 된다.</span><br>    <span class="hljs-keyword">char</span>* p2 = <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">char</span>*&gt;(<span class="hljs-built_in">malloc</span>(<span class="hljs-number">1</span>));<br><br>    <span class="hljs-keyword">int</span> x = <span class="hljs-number">0x1</span>;<br><br>    <span class="hljs-keyword">char</span>* p = &amp;x; <span class="hljs-comment">// ERROR</span><br>    <span class="hljs-keyword">char</span>* p = <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">char</span>*&gt;(&amp;x); <span class="hljs-comment">// ERROR</span><br><br>    <span class="hljs-comment">// 2. 비이성적 형 변환: char*로 재해석 해달라는 의미.</span><br>    <span class="hljs-comment">// 컴파일러의 타입 체크 기능을 끄지 않고 형 변환을 강행.</span><br>    <span class="hljs-comment">// C언어의 대부분의 형 변환을 지원한다.</span><br>    <span class="hljs-keyword">char</span>* p = <span class="hljs-keyword">reinterpret_cast</span>&lt;<span class="hljs-keyword">char</span>*&gt;(&amp;x);<br><br><br>    <span class="hljs-keyword">const</span> <span class="hljs-keyword">double</span> PI = <span class="hljs-number">3.14</span>; <span class="hljs-comment">// * 심볼릭 상수: 이름이 있는 상수</span><br><br>    <span class="hljs-keyword">double</span>* p = &amp;PI <span class="hljs-comment">// C언어에서는 에러가 나지 않는다. 즉 런타임에서 상수성을 보장하지 않는다.</span><br>    <span class="hljs-keyword">double</span>* p = <span class="hljs-keyword">reinterpret_cast</span>&lt;<span class="hljs-keyword">double</span>*&gt;(&amp;PI); <span class="hljs-comment">// ERROR</span><br>    <span class="hljs-comment">// C언어의 대부분의 형 변환을 지원하지만 이것만은 예외로 지원하지 않는다.</span><br>    <span class="hljs-comment">// 이러한 캐스팅을 C언어에서 지원하는건 언어의 스펙 때문이지</span><br>    <span class="hljs-comment">// 이성적인 판단에 의한 것은 아니다.</span><br><br>    <span class="hljs-comment">// 3. 비상수 형 변환: const_cast</span><br>    <span class="hljs-comment">// 문법적으로 지원을 한다. 필요한 경우가 있으닌까.</span><br>    <span class="hljs-comment">// 하지만 대부분의 개발자들은 const_cast를 쓴다는 것은 설계가 잘못된 것이라고 생각한다.</span><br>    <span class="hljs-keyword">double</span> *p = <span class="hljs-keyword">const_cast</span>&lt;<span class="hljs-keyword">double</span>*&gt;(&amp;PI);<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="Up-Casting-Down-Casting"><a href="#Up-Casting-Down-Casting" class="headerlink" title="Up Casting / Down Casting"></a>Up Casting / Down Casting</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-keyword">virtual</span> ~Animal() &#123;&#125;<br>&#125;;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> :</span> <span class="hljs-keyword">public</span> Animal &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span> </span>&#123;&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Animal* p1 = <span class="hljs-keyword">new</span> Animal;<br><br>    Animal* p2 = <span class="hljs-keyword">static_cast</span>&lt;Animal*&gt;(<span class="hljs-keyword">new</span> Dog); <span class="hljs-comment">// 이성적 형 변환이니 이렇게 해야...</span><br>    Animal* p2 = <span class="hljs-keyword">new</span> Dog; <span class="hljs-comment">// 이건 왜 되는거야?: 상속 관계이므로!</span><br>    <span class="hljs-comment">// upcasting: 형 변환 연산자를 생략할 수 있다.</span><br>    <span class="hljs-comment">// 컴파일러가 컴파일 타임에 두 클래스 간의 관계를 알고있기 때문.</span><br><br><br>    Dog* pDog = p2; <span class="hljs-comment">// ERROR: 컴파일 타임에 p2가 어떤 형일지 알 수가 없다.</span><br>    <span class="hljs-comment">// downcasting을 위해 명시적 형 변환을 하면 컴파일러 기능을 꺼버리므로 문제가 됨.</span><br>    <span class="hljs-comment">// RTTI를 사용해야 한다.</span><br><br><br>    <span class="hljs-comment">// RTTI(Runtime Type Information)</span><br>    <span class="hljs-comment">// : C언어 표준이 아니라 컴파일러가 제공해 주는 기능</span><br>    <span class="hljs-comment">// 컴파일러 옵션에 켜는게 있다.</span><br>    <span class="hljs-comment">// 이 기능을 사용하려면 class 안에 가상 함수가 하나라도 있어야함.</span><br>    <span class="hljs-comment">// Lookup Table 위에 RTTI 정보가 저장이 된다. (밑에 참조)</span><br>    <span class="hljs-comment">// 자바는 기본으로 제공이 된다.</span><br><br><br>    <span class="hljs-comment">// downcasting: dynamic_cast</span><br>    <span class="hljs-comment">// 만약 캐스팅에 실패하면 return type이 null이 나옴.</span><br>    <span class="hljs-comment">// 형 변환에 대한 안정성이 보장이 안되기 때문에 값을 확인하고 사용해야한다.</span><br>    Dog* pDog = <span class="hljs-keyword">dynamic_cast</span>&lt;Dog*&gt;(p2);<br>    <span class="hljs-keyword">if</span>(p2 == <span class="hljs-number">0</span>)<br>        <span class="hljs-comment">// ..</span><br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-comment">// ..</span><br>&#125;<br></code></pre></td></tr></table></figure>


<h3 id="참고-Virtual-함수에-대하여"><a href="#참고-Virtual-함수에-대하여" class="headerlink" title="[참고] Virtual 함수에 대하여"></a>[참고] Virtual 함수에 대하여</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// * 번호 순서대로 볼 것</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Clazz</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">/*</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">void foo() &#123;&#125;</span><br><span class="hljs-comment">    // 2. 여전히 크기는 1이 나온다.</span><br><span class="hljs-comment">    // 즉 Class안에 함수가 포함되지 않는 걸 알 수 있다.</span><br><span class="hljs-comment">    // 멤버함수는 텍스트 영역에 저장되기 때문!</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">foo2</span><span class="hljs-params">()</span> </span>&#123;&#125;<br>    <span class="hljs-comment">// 3. 이건 크기가 4가 나온다!</span><br>    <span class="hljs-comment">// Dynamic binding</span><br>    <span class="hljs-comment">// 변수 목록 위에 포인터를 하나 더 만듦</span><br>    <span class="hljs-comment">// Lookup Table...</span><br><br>     <span class="hljs-comment">// 정리하기</span><br>&#125;;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Clazz obj;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(obj) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-comment">// 1. 사이즈가 0이 나올꺼 같지만 1이 나온다.</span><br>    <span class="hljs-comment">// 왜일까?</span><br>    <span class="hljs-comment">// 접근을 위해선 최소한의 공간으로 메모리에 할당이 되야하기 때문.</span><br>    <span class="hljs-comment">// 그래서 C++는 클래스가 비어있더라도 1크기 만큼을 할당해서 메모리에 올린다.</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="Replace-Magic-number-with-Symbolic-Constant"><a href="#Replace-Magic-number-with-Symbolic-Constant" class="headerlink" title="Replace Magic number with Symbolic Constant"></a>Replace Magic number with Symbolic Constant</h2><h3 id="수동으로-처리하는-상수"><a href="#수동으로-처리하는-상수" class="headerlink" title="수동으로 처리하는 상수"></a>수동으로 처리하는 상수</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Window</span></span><br><span class="hljs-class">&#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">set_language</span><span class="hljs-params">(<span class="hljs-keyword">int</span> lang)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">switch</span> (lang)<br>        &#123;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;KOR&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>; <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;ENG&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>; <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;JPN&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>; <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Window w;<br>    w.set_language(<span class="hljs-number">0</span>); <span class="hljs-comment">// KOR - 여기서 사용된 숫자가 Magic Number라고 한다 (?)</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>이런식의 처리는…</p>
<ol>
<li>사용된 상수의 의미가 모호 -&gt; 가독성이 떨어짐</li>
<li>외부에 대한 유연성이 떨어짐 -&gt; 확장성이 떨어짐</li>
</ol>
<h3 id="매크로-상수-도입"><a href="#매크로-상수-도입" class="headerlink" title="매크로 상수 도입"></a>매크로 상수 도입</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// 매크로 상수 사용</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> KOR (0)</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ENG (1)</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> JPN (2)</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Window</span></span><br><span class="hljs-class">&#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">set_language</span><span class="hljs-params">(<span class="hljs-keyword">int</span> lang)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">switch</span> (lang)<br>        &#123;<br>            <span class="hljs-keyword">case</span> KOR: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;KOR&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>; <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> ENG: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;ENG&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>; <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> JPN: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;JPN&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>; <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Window w;<br>    w.set_language(KOR);<br>&#125;<br></code></pre></td></tr></table></figure>
<ol>
<li>가독성이 높아지지만 유지보수가 어렵다.</li>
<li>컴파일러의 고급 기능(디버깅)을 지원 받을 수가 없다. (인터프리터가 처리하는 것이기 때문이다)</li>
</ol>
<h3 id="컴파일러-상수-컴파일-타임-상수"><a href="#컴파일러-상수-컴파일-타임-상수" class="headerlink" title="컴파일러 상수 (컴파일 타임 상수)"></a>컴파일러 상수 (컴파일 타임 상수)</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> KOR = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> ENG = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> JPN = <span class="hljs-number">2</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Window</span></span><br><span class="hljs-class">&#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">set_language</span><span class="hljs-params">(<span class="hljs-keyword">int</span> lang)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">switch</span> (lang)<br>        &#123;<br>        <span class="hljs-keyword">case</span> KOR: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;KOR&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>        <span class="hljs-keyword">case</span> ENG: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;ENG&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>        <span class="hljs-keyword">case</span> JPN: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;JPN&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>        &#125;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Window w;<br>    w.set_language(KOR);<br>&#125;<br></code></pre></td></tr></table></figure>
<ol>
<li>디버깅시 watch 상수 값을 확인할 수 있다.</li>
<li>대신 런타임에서 메모리 사용량이 증가하긴함.</li>
</ol>
<h3 id="enum"><a href="#enum" class="headerlink" title="enum"></a>enum</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">// enumeration</span><br><span class="hljs-comment">enum &#123; KOR = 0, ENG, JPN &#125;;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">// C언어에서는 enum은 완전한 타입이 아니라 int의 호환형이다.</span><br><span class="hljs-comment">// 그래서 int가 인수인 자리에도 enum이 들어갈 수 있다.</span><br><span class="hljs-comment">// 하지만 C++에선 하나의 타입으로 인정받는다.</span><br><span class="hljs-comment">// 대신 태그를 붙여서 선언해야함</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">enum LANG &#123; KOR = 0, ENG, JPN &#125;;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">// 하지만 전역에 이렇게 선언해 버리면 네임 스페이스가 오염되므로</span><br><span class="hljs-comment">// 클래스 안으로 넣어버리는게 더 좋다.</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Window</span></span><br><span class="hljs-class">&#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">LANG</span> &#123;</span> KOR = <span class="hljs-number">0</span>, ENG, JPN &#125;;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">set_language</span><span class="hljs-params">(LANG lang)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">switch</span> (lang)<br>        &#123;<br>        <span class="hljs-keyword">case</span> KOR: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;KOR&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>; <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> ENG: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;ENG&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>; <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> JPN: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;JPN&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>; <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Window w;<br>     <span class="hljs-comment">// w.set_language(KOR); // 전역 변수에 선언한 경우 사용법</span><br>    w.set_language(Window::KOR); <span class="hljs-comment">// 클래스 안에 선언한 경우 사용법</span><br>&#125;<br></code></pre></td></tr></table></figure>
<ol>
<li>타입으로 인정 받을 수 있다.</li>
<li>사용이 편함</li>
</ol>
<h2 id="Null-Object"><a href="#Null-Object" class="headerlink" title="Null Object"></a>Null Object</h2><h3 id="필요성에-대하여"><a href="#필요성에-대하여" class="headerlink" title="필요성에 대하여"></a>필요성에 대하여</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// 각 객체를 하나의 타입으로 처리 하기 위해 부모 클래스를 설계한다.</span><br><span class="hljs-comment">// write 함수가 반드시 구현될 수 있도록 인터페이스를 도입</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ILog</span></span><br><span class="hljs-class">&#123;</span><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">write</span><span class="hljs-params">(<span class="hljs-built_in">string</span> msg)</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConsoleLog</span> :</span> <span class="hljs-keyword">public</span> ILog<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">write</span><span class="hljs-params">(<span class="hljs-built_in">string</span> msg)</span> </span>&#123; <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Console: &quot;</span> &lt;&lt; msg &lt;&lt; <span class="hljs-built_in">endl</span>; &#125;<br>&#125;;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FileLog</span> :</span> <span class="hljs-keyword">public</span> ILog<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">write</span><span class="hljs-params">(<span class="hljs-built_in">string</span> msg)</span> </span>&#123; <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Console:&quot;</span> &lt;&lt; msg &lt;&lt; <span class="hljs-built_in">endl</span>; &#125;<br>&#125;;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LogService</span></span><br><span class="hljs-class">&#123;</span><br><span class="hljs-keyword">public</span>:<br>    ILog* pLog;<br><br>    LogService(ILog* p) &#123; pLog = p; &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-comment">//...</span><br>        <span class="hljs-keyword">if</span> (pLog != <span class="hljs-number">0</span>) pLog-&gt;write(<span class="hljs-string">&quot;url error&quot;</span>);<br><br>        <span class="hljs-comment">//...</span><br>        <span class="hljs-keyword">if</span> (pLog != <span class="hljs-number">0</span>) pLog-&gt;write((<span class="hljs-string">&quot;file error&quot;</span>);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>
<p>LogService에서 보면 Null 포인터를 항상 체크해줘야한다.<br>굳이 해야할까?</p>
<h3 id="싱글톤"><a href="#싱글톤" class="headerlink" title="싱글톤"></a>싱글톤</h3><h4 id="싱글톤을-위한-문법-규칙-3가지"><a href="#싱글톤을-위한-문법-규칙-3가지" class="headerlink" title="싱글톤을 위한 문법 규칙 3가지"></a>싱글톤을 위한 문법 규칙 3가지</h4><ol>
<li>객체의 임의 생성을 막기 위해 생성자를 private 영역에 정의</li>
<li>유일한 객체를 반환하기 위한 정적 인터페이스 도입</li>
<li>대입과 복사를 금지하기 위해 대입 연산자 함수와 복사 생성자 함수를 private 영역에 정의</li>
</ol>
<h4 id="참고-Exception"><a href="#참고-Exception" class="headerlink" title="[참고] Exception"></a>[참고] Exception</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>     <span class="hljs-keyword">return</span> a + b;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>C에선 리턴 값이 함수의 성공과 실패를 반환하기도 하고 함수의 출력을 반환하기도함. 즉 모호함.<br>C++에선 이를 분리해놨다. 예외를 통해 성공과 실패를 알리고 리턴 값이 함수의 출력을 의미하게 함.</p>
<h4 id="Cursor-구현하면서-싱글톤-들여다보기"><a href="#Cursor-구현하면서-싱글톤-들여다보기" class="headerlink" title="Cursor 구현하면서 싱글톤 들여다보기"></a>Cursor 구현하면서 싱글톤 들여다보기</h4><p>싱글톤을 만들려니 thread safety 하지 않아서 쓰레드를 도입하니<br>exception safety 하지 않더라. (데드락 발생)<br>그래서 AutoLock 기법을 도입.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// 인스턴스를 최초 생성할 때 thread safety 하지 못하므로</span><br><span class="hljs-comment">// Mutex 도입</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Mutex</span></span><br><span class="hljs-class">&#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">lock</span><span class="hljs-params">()</span> </span>&#123; <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;LOCK&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>; &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">unlock</span><span class="hljs-params">()</span> </span>&#123; <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;UNLOCK&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>; &#125;<br>&#125;;<br><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt; <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AutoLock</span></span><br><span class="hljs-class">&#123;</span><br>    T&amp; obj;<br><br><span class="hljs-keyword">public</span>:<br>    AutoLock(T&amp; o) : obj(o) &#123; obj.lock(); &#125;<br>    AutoLock(T* p) : obj(*p) &#123; obj.lock(); &#125;<br>    ~AutoLock() &#123; obj.unlock(); &#125;<br>&#125;;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Cursor</span></span><br><span class="hljs-class">&#123;</span><br>    <span class="hljs-comment">// 1. 객체의 임의 생성을 막기 위해</span><br>    <span class="hljs-comment">// 생성자를 private 영역에 정의</span><br>    Cursor() &#123;&#125;<br><br>    <span class="hljs-comment">// 3. 대입과 복사를 금지하기 위해 대입 연산자 함수와</span><br>    <span class="hljs-comment">// 복사 생성자 함수를 private 영역에 정의</span><br><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">    // 이렇게 막아줄 수 있지만...</span><br><span class="hljs-comment">    Cursor(const Cursor&amp; c) &#123;&#125;</span><br><span class="hljs-comment">    Cursor&amp; operator=(const Cursor&amp; c) &#123;&#125;</span><br><span class="hljs-comment">    // 클래스 내부에서의 호출은 못막음 (아래 foo 함수)</span><br><span class="hljs-comment">    */</span><br><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">    // 따라서</span><br><span class="hljs-comment">    Cursor(const Cursor&amp; c);</span><br><span class="hljs-comment">    Cursor&amp; operator=(const Cursor&amp; c);</span><br><span class="hljs-comment">    // 이렇게 해서 링킹 타임에 에러를 나게 만든다!</span><br><span class="hljs-comment">    */</span><br><br>    <span class="hljs-comment">// 근데 이건 가독성이 떨어짐.</span><br>    <span class="hljs-comment">// 그래서 새 표준에선 다음과 같이 쓴다.</span><br>    Cursor(<span class="hljs-keyword">const</span> Cursor&amp; c) = <span class="hljs-keyword">delete</span>;<br>    Cursor&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-keyword">const</span> Cursor&amp; c) = <span class="hljs-keyword">delete</span>;<br><br><br>    <span class="hljs-keyword">static</span> Mutex mutex;<br>    <span class="hljs-comment">// 고프 싱글톤</span><br>    <span class="hljs-keyword">static</span> Cursor* pInstance; <span class="hljs-comment">// 이건 단순한 선언에 불과하다.</span><br>    <span class="hljs-comment">// 초기화 해줘야함!</span><br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">// private에 정의만 하면 내부에서 복사 생성자를 호출 할 수 있다.</span><br>    <span class="hljs-comment">// 어떻게 막아야 할까?</span><br>    <span class="hljs-comment">// 컴파일 타임에선 함수가 있고 없고의 문제 보단 제대로 타입이 잘 들어 간건지 타입 체크만 한다.</span><br>    <span class="hljs-comment">// 링킹 타임에서 함수가 실제로 바인딩 될때 기계어가 없는걸 보고 에러를 나게 해야한다.</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        Cursor c;<br>        Cursor c1 = c;<br>        Cursor c2;<br>        c2 = c;<br>    &#125;<br><br><br>    <span class="hljs-comment">// 2. 유일한 객체를 반환하기 위한 정적 인터페이스 도입</span><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> Cursor* <span class="hljs-title">getInstance</span><span class="hljs-params">()</span> <span class="hljs-comment">// self in Android</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        static Cursor cursor; // 데이터 영역에 선언하는건 마이어&#x27;s 싱글톤</span><br><span class="hljs-comment">        // 이거보단 고프 싱글톤을 많이 씀. (힙에 선언)</span><br><span class="hljs-comment">        return &amp;cursor;</span><br><span class="hljs-comment">        */</span><br><br>        <span class="hljs-comment">// mutex.lock(); // 동적할당에 실패하면 예외 발생</span><br>        <span class="hljs-comment">// -&gt; unlock 호출이 안됨</span><br>        <span class="hljs-comment">// -&gt; Dead Lock 발생</span><br><br>        <span class="hljs-comment">// RAII (Resource Acquisition is Initialization)</span><br>        <span class="hljs-comment">// : 소멸될 때 자원을 획득하자! (?)</span><br>        <span class="hljs-function">AutoLock&lt;Mutex&gt; <span class="hljs-title">l</span><span class="hljs-params">(mutex)</span></span>; <span class="hljs-comment">// 생성자와 파괴자를 통해서 lock/unlock함</span><br>                                                            <span class="hljs-comment">// 예외 발생시 스택을 풀면서 나가는 성질을</span><br>                                                            <span class="hljs-comment">// 이용한 것이다. (Stack Unwinding)</span><br>                                                            <span class="hljs-comment">// 스택이 풀리면서 파괴자가 호출됨.</span><br>                                                            <span class="hljs-comment">// 이를 통해 Exception Safety를 보장</span><br>        <span class="hljs-keyword">if</span> (pInstance == <span class="hljs-number">0</span>)<br>            pInstance = <span class="hljs-keyword">new</span> Cursor;<br>        <span class="hljs-comment">// mutex.unlock();</span><br><br>        <span class="hljs-keyword">return</span> pInstance;<br>    &#125;<br>&#125;;<br>Cursor* Cursor::pInstance = <span class="hljs-number">0</span>; <span class="hljs-comment">// 초기화</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Cursor* c1 = Cursor::getInstance();<br>    Cursor* c2 = Cursor::getInstance();<br><br>    <span class="hljs-built_in">cout</span> &lt;&lt; &amp;c1 &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; &amp;c2 &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>    <span class="hljs-comment">//Cursor c3(*c1);</span><br>    <span class="hljs-comment">//Cursor c3 = *c1; // 복사 생성자들... 이놈들도 문제다!</span><br><br>    Cursor* c3;<br><br>    <span class="hljs-built_in">cout</span> &lt;&lt; &amp;c3 &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="싱글톤을-이용한-NullLog-클래스-구현"><a href="#싱글톤을-이용한-NullLog-클래스-구현" class="headerlink" title="싱글톤을 이용한 NullLog 클래스 구현"></a>싱글톤을 이용한 NullLog 클래스 구현</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ILog</span></span><br><span class="hljs-class">&#123;</span><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">write</span><span class="hljs-params">(<span class="hljs-built_in">string</span> msg)</span> </span>= <span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">// Null 객체 확인을 위한 인터페이스를 제공해야 한다.</span><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">is_null</span><span class="hljs-params">()</span> </span>&#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; &#125;;<br>&#125;;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NullLog</span> :</span> <span class="hljs-keyword">public</span> ILog<br>&#123;<br>    <span class="hljs-keyword">static</span> NullLog* pInstance;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> NullLog* <span class="hljs-title">getInstance</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">if</span>(pInstance == <span class="hljs-number">0</span>)<br>             pInstance = <span class="hljs-keyword">new</span> NullLog;<br><br>        <span class="hljs-keyword">return</span> pInstance;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">write</span><span class="hljs-params">(<span class="hljs-built_in">string</span> msg)</span> </span>&#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">is_null</span><span class="hljs-params">()</span> </span>&#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; &#125;<br>&#125;;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConsoleLog</span> :</span> <span class="hljs-keyword">public</span> ILog<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">write</span><span class="hljs-params">(<span class="hljs-built_in">string</span> msg)</span> </span>&#123; <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Console: &quot;</span> &lt;&lt; msg &lt;&lt; <span class="hljs-built_in">endl</span>; &#125;<br>&#125;;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FileLog</span> :</span> <span class="hljs-keyword">public</span> ILog<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">write</span><span class="hljs-params">(<span class="hljs-built_in">string</span> msg)</span> </span>&#123; <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Console:&quot;</span> &lt;&lt; msg &lt;&lt; <span class="hljs-built_in">endl</span>; &#125;<br>&#125;;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LogService</span></span><br><span class="hljs-class">&#123;</span><br><span class="hljs-keyword">public</span>:<br>    ILog* pLog;<br><br>    LogService(ILog* p) &#123; pLog = p; &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-comment">//...</span><br>        pLog-&gt;write(<span class="hljs-string">&quot;url error&quot;</span>);<br><br>        <span class="hljs-comment">//...</span><br>        pLog-&gt;write(<span class="hljs-string">&quot;File error&quot;</span>);<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    NullLog nullObj;<br>    <span class="hljs-function">LogService <span class="hljs-title">log</span><span class="hljs-params">(&amp;nullObj)</span></span>;<br>    <span class="hljs-built_in">log</span>.run();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>Null 포인터를 체크할 필요가 없다.</p>
<h2 id="아직-정리중"><a href="#아직-정리중" class="headerlink" title="아직 정리중"></a>아직 정리중</h2><h3 id="참고-추천-서적"><a href="#참고-추천-서적" class="headerlink" title="[참고] 추천 서적"></a>[참고] 추천 서적</h3><h4 id="Effective-C"><a href="#Effective-C" class="headerlink" title="Effective C++"></a>Effective C++</h4><p>C++ Refactoring을 배우고 싶으면 이 책을 봐라. C++에선 포인터가 있어서 할 말이 많지만, Java는 그렇지 않기 때문에 설계적인 측면의 내용을 주로 다룸.</p>
<h4 id="창시자의-책"><a href="#창시자의-책" class="headerlink" title="창시자의 책"></a>창시자의 책</h4><p>엄청 자세히 설명되어 있음. 1000 페이지 정도 된다.</p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author:  </strong>Hoyuo
  </li>
  <li class="post-copyright-link">
    <strong>Post link: </strong>
    <a href="https://hoyuo.github.io/2016/06/29/cpluscplus/refactoring-2/" title="리펙토링 2강">https://hoyuo.github.io/2016/06/29/cpluscplus/refactoring-2/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/cpp/" rel="tag"><i class="fa fa-tag"></i> cpp</a>
              <a href="/tags/refactoring/" rel="tag"><i class="fa fa-tag"></i> refactoring</a>
          </div>

        
  <div class="post-widgets">
    <div class="wp_rating">
      <div id="wpac-rating"></div>
    </div>
  </div>


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2016/06/29/cpluscplus/refactoring-1/" rel="prev" title="리펙토링 1강">
      <i class="fa fa-chevron-left"></i> 리펙토링 1강
    </a></div>
      <div class="post-nav-item">
    <a href="/2016/06/29/cpluscplus/advanced-cpp-1/" rel="next" title="this_call">
      this_call <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          목차
        </li>
        <li class="sidebar-nav-overview">
          흝어보기
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Refactoring"><span class="nav-number">1.</span> <span class="nav-text">Refactoring</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%EC%A7%80%EB%82%9C-%EC%9D%B4%EC%95%BC%EA%B8%B0"><span class="nav-number">1.1.</span> <span class="nav-text">지난 이야기?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EC%BA%90%EC%8A%A4%ED%8C%85-%EC%9D%B4%EC%95%BC%EA%B8%B0"><span class="nav-number">1.2.</span> <span class="nav-text">캐스팅 이야기</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#C-C-%EC%9D%98-%EC%B0%A8%EC%9D%B4"><span class="nav-number">1.2.1.</span> <span class="nav-text">C &#x2F; C++의 차이</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#C%EC%96%B8%EC%96%B4%EC%9D%98-%EC%84%A4%EA%B3%84-%EC%B2%A0%ED%95%99"><span class="nav-number">1.2.2.</span> <span class="nav-text">C언어의 설계 철학</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#C-%EC%97%90%EC%84%9C%EC%9D%98-%ED%98%95-%EB%B3%80%ED%99%98"><span class="nav-number">1.2.3.</span> <span class="nav-text">C++에서의 형 변환</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Up-Casting-Down-Casting"><span class="nav-number">1.2.4.</span> <span class="nav-text">Up Casting &#x2F; Down Casting</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EC%B0%B8%EA%B3%A0-Virtual-%ED%95%A8%EC%88%98%EC%97%90-%EB%8C%80%ED%95%98%EC%97%AC"><span class="nav-number">1.2.5.</span> <span class="nav-text">[참고] Virtual 함수에 대하여</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Replace-Magic-number-with-Symbolic-Constant"><span class="nav-number">1.3.</span> <span class="nav-text">Replace Magic number with Symbolic Constant</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%EC%88%98%EB%8F%99%EC%9C%BC%EB%A1%9C-%EC%B2%98%EB%A6%AC%ED%95%98%EB%8A%94-%EC%83%81%EC%88%98"><span class="nav-number">1.3.1.</span> <span class="nav-text">수동으로 처리하는 상수</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EB%A7%A4%ED%81%AC%EB%A1%9C-%EC%83%81%EC%88%98-%EB%8F%84%EC%9E%85"><span class="nav-number">1.3.2.</span> <span class="nav-text">매크로 상수 도입</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EC%BB%B4%ED%8C%8C%EC%9D%BC%EB%9F%AC-%EC%83%81%EC%88%98-%EC%BB%B4%ED%8C%8C%EC%9D%BC-%ED%83%80%EC%9E%84-%EC%83%81%EC%88%98"><span class="nav-number">1.3.3.</span> <span class="nav-text">컴파일러 상수 (컴파일 타임 상수)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#enum"><span class="nav-number">1.3.4.</span> <span class="nav-text">enum</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Null-Object"><span class="nav-number">1.4.</span> <span class="nav-text">Null Object</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%ED%95%84%EC%9A%94%EC%84%B1%EC%97%90-%EB%8C%80%ED%95%98%EC%97%AC"><span class="nav-number">1.4.1.</span> <span class="nav-text">필요성에 대하여</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EC%8B%B1%EA%B8%80%ED%86%A4"><span class="nav-number">1.4.2.</span> <span class="nav-text">싱글톤</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%EC%8B%B1%EA%B8%80%ED%86%A4%EC%9D%84-%EC%9C%84%ED%95%9C-%EB%AC%B8%EB%B2%95-%EA%B7%9C%EC%B9%99-3%EA%B0%80%EC%A7%80"><span class="nav-number">1.4.2.1.</span> <span class="nav-text">싱글톤을 위한 문법 규칙 3가지</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EC%B0%B8%EA%B3%A0-Exception"><span class="nav-number">1.4.2.2.</span> <span class="nav-text">[참고] Exception</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Cursor-%EA%B5%AC%ED%98%84%ED%95%98%EB%A9%B4%EC%84%9C-%EC%8B%B1%EA%B8%80%ED%86%A4-%EB%93%A4%EC%97%AC%EB%8B%A4%EB%B3%B4%EA%B8%B0"><span class="nav-number">1.4.2.3.</span> <span class="nav-text">Cursor 구현하면서 싱글톤 들여다보기</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EC%8B%B1%EA%B8%80%ED%86%A4%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-NullLog-%ED%81%B4%EB%9E%98%EC%8A%A4-%EA%B5%AC%ED%98%84"><span class="nav-number">1.4.2.4.</span> <span class="nav-text">싱글톤을 이용한 NullLog 클래스 구현</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EC%95%84%EC%A7%81-%EC%A0%95%EB%A6%AC%EC%A4%91"><span class="nav-number">1.5.</span> <span class="nav-text">아직 정리중</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%EC%B0%B8%EA%B3%A0-%EC%B6%94%EC%B2%9C-%EC%84%9C%EC%A0%81"><span class="nav-number">1.5.1.</span> <span class="nav-text">[참고] 추천 서적</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Effective-C"><span class="nav-number">1.5.1.1.</span> <span class="nav-text">Effective C++</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EC%B0%BD%EC%8B%9C%EC%9E%90%EC%9D%98-%EC%B1%85"><span class="nav-number">1.5.1.2.</span> <span class="nav-text">창시자의 책</span></a></li></ol></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Hoyuo</p>
  <div class="site-description" itemprop="description">Hoyuo's programming writting</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">45</span>
          <span class="site-state-item-name">포스트</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">카테고리</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">태그</span></a>
      </div>
  </nav>
</div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hoyuo</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  



  <script>
  if (CONFIG.page.isPost) {
    wpac_init = window.wpac_init || [];
    wpac_init.push({
      widget: 'Rating',
      id    : 30567,
      el    : 'wpac-rating',
      color : '#fc6423'
    });
    (function() {
      if ('WIDGETPACK_LOADED' in window) return;
      WIDGETPACK_LOADED = true;
      var mc = document.createElement('script');
      mc.type = 'text/javascript';
      mc.async = true;
      mc.src = '//embed.widgetpack.com/widget.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(mc, s.nextSibling);
    })();
  }
  </script>

  
<script src="/js/local-search.js"></script>









<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>


<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : '79c048e4f0067cf8561e',
      clientSecret: '2143a9396e1b205817582122455e850a93254adf',
      repo        : 'gtalk',
      owner       : 'hoyuo',
      admin       : ['hoyuo'],
      id          : '4bb3b18200ebd79bd31a637d4942bab1',
        language: '',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

</body>
</html>
